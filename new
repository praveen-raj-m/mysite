private bool ValidateBreakdownTotals()
{
    if (SelectedContractTerm == null || ContractTermBreakDownList == null)
        return true;

    decimal totalFees = ContractTermBreakDownList.Sum(i => i.Fees);
    double totalPercentage = ContractTermBreakDownList.Sum(i => i.Percentage);

    bool isValid = true;
    string errorMessage = "";

    if (Math.Round(totalPercentage, 2) != 100.0)
    {
        errorMessage += "Total percentage must equal 100%.\n";
        isValid = false;
    }

    if (totalFees > SelectedContractTerm.TotalFees)
    {
        errorMessage += $"Total fees ({totalFees}) exceed allowed total ({SelectedContractTerm.TotalFees}).";
        isValid = false;
    }

    if (!isValid)
        DevExpress.XtraEditors.XtraMessageBox.Show(errorMessage, "Validation Error", MessageBoxButton.OK, MessageBoxImage.Error);

    return isValid;
}
